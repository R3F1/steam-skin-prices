<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Ceny skinów z ekwipunku</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    h1 { color: #333; }
    .skin { background: white; margin: 10px 0; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; align-items: center; }
    .skin img { width: 64px; height: 64px; margin-right: 15px; }
  </style>
</head>
<body>
  <h1>Ceny skinów z Twojego ekwipunku Steam</h1>
  <div id="skins">Wczytywanie...</div>

  <script>
    const steamId = "76561198819835529";
    const apiKey = "531A9DA59816EE4D594BD29F82EEEDE5";
    const inventoryUrl = `https://steamcommunity.com/inventory/${steamId}/730/2?l=english&count=5000`;
    const container = document.getElementById('skins');

    async function getMarketPrice(name) {
      const url = `https://steamcommunity.com/market/priceoverview/?appid=730&currency=1&market_hash_name=${encodeURIComponent(name)}`;
      const res = await fetch(url);
      const data = await res.json();
      return data.lowest_price || 'Brak danych';
    }

    async function loadInventory() {
      try {
        const res = await fetch(inventoryUrl);
        const data = await res.json();
        const items = data.descriptions;

        container.innerHTML = '';
        for (const item of items) {
          const name = item.market_hash_name;
          const icon = `https://steamcommunity-a.akamaihd.net/economy/image/${item.icon_url}`;
          const price = await getMarketPrice(name);

          const div = document.createElement('div');
          div.className = 'skin';
          div.innerHTML = `
            <img src="${icon}" alt="${name}" />
            <div>
              <strong>${name}</strong><br>
              Cena: ${price}
            </div>
          `;
          container.appendChild(div);
        }
      } catch (err) {
        container.innerHTML = 'Błąd podczas ładowania ekwipunku.';
        console.error(err);
      }
    }

    loadInventory();
  </script>
</body>
</html>
